<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,height=device-height, initial-scale=1.0">
    <title>Tablero_test</title>
        <!-- BootStrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- JQuery -->
        <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.14.0/themes/base/jquery-ui.css">

        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        
        <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
        <!-- <script src='https://kit.fontawesome.com/a076d05399.js' ></script> -->
        <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
        <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->

        <script src="./newFlex_eventlistener.js" defer></script>
        <!-- <script src="./dataStorage.js" defer></script>  -->
                  <!-- <link href="./newFlex.css" rel="stylesheet"> -->
                 <!-- <script src="./storage.js" defer></script> 
              
     
                 <script src="./objeto.js" defer></script>
     
                    
                 <script src="./newFlex_main.js" defer></script> -->
        <template id="id_0" name="jugadores_new">
            <div class="d-flex bg-black w-100 h-100 border rounded-3   border-outset border-0">

                <div class="border-0 p-1 h-100 w-100 d-flex flex-column gap-2 pb-1">
                    <div  style="zoom: .8;"  class="d-flex gap-2 p-0 pb-1 justify-content-start border-bottom  w-100 overflow-auto">
                        <h4 onclick="show_hide2('jugador_detail')" class="text-white ps-2 ms-2 me-2 mt-2">Jugadores</h4> 
                        <!-- <button onclick="rellena_select('jugadores')"   class="btn btn-sm bg-success bg-gradient border text-white p-0 pe-2 ps-2 m-2">
                            <i  onclick="add_player();" class="material-icons mt-1"style="font-size:40px">cloud_download</i>

                        </button> -->
                        <!-- <button class="btn btn-sm btn-danger bg-gradient p-0 pe-2 ps-2 m-2 " onclick="add_player();"> 
                            <i class="material-icons" style="font-size:30px;color:rgb(3, 2, 2)">add</i>
                        </button> -->
                        <i  onclick="rellena_select('jugadores');this.className='material-icons mt-1 me-3 text-white';"    class="material-icons mt-1 me-3 text-primary "style="font-size:40px">cloud_download</i>

                        <i  onclick="add_player();" class="material-icons mt-1 text-success "style="font-size:40px">add_circle_outline</i>

                        <!-- <button class="btn btn-sm btn-warning text-black bg-gradient p-0 pe-2 ps-2 m-2" onclick="myFunction()">
                            <i class="material-icons" style="font-size:30px;color:rgb(9, 7, 7)">delete</i>

                        </button> -->
                        <i onclick="myFunction()" class="material-icons mt-1 text-danger "style="font-size:40px">remove_circle_outline</i>

          
                            </div>
                    <div id="jugador_detail" class="d-flex gap-2 overflow-x-auto h-50 overflow-hidden flex-grow-1">
                        <div class="w-25 border bg-warning h-100 text-white d-flex flex-column p-1 ms-1">
                            <div class="text-center text-primary">Player</div>
                            <select size="4" onchange="select_change(this.value)"  class="btn btn-sm rounded border border-inset bg-danger bg-gradient w-auto text-white overflow-hidden p-2 ms-1 me-1 h-100 d-flex"></select>
            
                        </div>
                        <div class="w-75 d-flex flex-column h-100 mt-3 gap-2 pe-1">
                            <div class="d-flex gap-2 text-center w-100">
                                <div class="border-0 text-white pt-1 ps-1 pe-1 w-25 flex-grow-1">Id:</div>
                                <input id="input_id" type="text" class="btn bg-white text-danger rounded w-50 p-0 text-center " disabled/>
                                <button onclick="" class="btn btn-sm btn-primary bg-gradient disabled">‚Üª</button>
                            </div>
                            <div class="d-flex gap-2 text-center w-100">
                                <div class="border-0 text-white pt-1 ps-1 pe-1 w-25 flex-grow-1">Nombre:</div>
                                <input id="input_nombre" type="text" class="rounded w-50 text-center"/>
                                <button onclick="update_nombre(input_id.value)" class="btn btn-sm btn-primary bg-gradient">‚Üª</button>
                            </div>
                            <div class="d-flex gap-2">
                                <div class="border-0 text-center text-white pt-1 ps-1 pe-1 w-25 flex-grow-1">Color:</div>
                                <input id="input_color"  type="text" class="rounded w-50 text-center"/>
                                <button  onclick="update_color(input_id.value)" class="btn btn-sm btn-primary bg-gradient">‚Üª</button>
                    
                            </div>
                        </div>
            
                    </div>
            
                
                </div>
            
                </div>  
        </template>
        <template id="id_999">
            <div ctgr="tablero" class="border border-primary border-2 m-0 w-100 h-100"></div>
            <div></div>
            <div ctgr="" id="" class=""></div>
            <div ctgr="" id="" class="border "></div>
        
        </template>
        <style>
            html{
                height: 100vh;
                width: 100vw;
                overflow: hidden;
            }
            p{width: 100% !important;
            padding: 10%;
        }
            body{
                overflow: hidden;
                /* zoom: .8; */
                padding: 5px !important;
            }
            /* body *{
                z-index: 0 !important;
            } */
            #panel_conf{
                /* zoom: .7; */
                min-height: 320px !important;
                min-width: 320px !important;
            }
            #panel_test{
                /* zoom: .9; */
                min-height: 600px !important;
                min-width: 600px !important;
            }
            #tablero{
                font-size: 12px;
            }
            #tablero2{
                font-size: 10px !important;
                padding: 0 !important;
            }
            #panel_drag{
                display: none !important;
            }
    
 
            textarea{
                color: greenyellow !important;
                color: greenyellow !important;
        
            }
            canvas{
                /* border-radius: 50% !important; */
                border: none  !important;
                color: black !important;
        
            }
            .ficha:hover{
                border: outset 8px !important;

                height: 50px !important;
                width: 50px !important;
                color :#ffa514;
                /* left:40% !important;
                top:40% !important; */
                /* background-image: url(); */
        
            }
            .ficha-warning{
                background-color: rgb(163, 163, 44) !important;
            }
            .celda-casa{
                border: outset 8px !important;
                border-radius: 50% !important;
                padding: 10px;
                background-color: rgba(0, 0, 0, 0.356);
                color:  rgba(0, 0, 0, 0.356)!important;
            }
            #centro_casillas_1_1{
                /* transform: rotate(45deg); */
                
            border: none !important;
            
            /* position: relative; */
            /* 
            top: -15px;
            left: -5px;
            height: 125% !important;
            transform: rotate(45deg);  */
            /* border: none !important; */
            /* position: relative; */
            /* top: -15px; */
            /* left: -5px; */
            /* height: 125% !important;*/
            }
            #tablero_linea_1_cuadro_2_casillas_1  canvas,#tablero_linea_3_cuadro_2_casillas_1  canvas{
                text-align:right !important;
            }
            #tablero_linea_2_cuadro_2_casillas_1{
                vertical-align: middle !important;
            }
            #tablero_linea_1_cuadro_2_casillas_1 div canvas , #tablero_linea_3_cuadro_2_casillas_1 div canvas{
                padding-right: 25px !important;
        
            }
            #tablero_linea_1_cuadro_2_casillas_3 div canvas, #tablero_linea_3_cuadro_2_casillas_3 div canvas{
                padding-left: 25px !important;
        
            }
            #tablero_linea_2_cuadro_1_casillas_1 canvas{
               /* background-color: white; */
            border: outset !important;
            border-radius: 50%;
            margin-top: 35px;
            }
            #tablero_linea_2_cuadro_1_casillas_3 canvas{
                border: outset !important;
            border-radius: 50%;
            margin-top: 35px;
            }
             #celda_42{
                border: none !important;
        
            }
              
            #celda_43{
               
        
        
        
            }  /* */
            .centro-casilla {
                border: none !important;
                /* width: 50% !important; */
                /* padding-left: 25% !important; */
                padding-left: 5px !important;
            }
            .centro-casilla div{
                /* text-align: center !important;
                border-bottom: none !important;
                border-left : none !important;
                border-right: none !important; */
            }
            .centro-casilla-right {
                text-align: right !important;
                width: 100%  !important;
                height: 100%  !important;
                /* padding-left: 5px !important; */
        
            }
            #centro_top{
                position: relative;
            top: 15%;
            width: 66%;
            height: 70%;
            background-color: white;
            /* z-index: 200; */
            margin-left: -65%;
            left: -18%;
            border-radius: 10px;
            padding: 5px !important;
            }
            .linea-cuadro{
                min-width: 140px !important;
                min-height: 140px !important;
        
            }
            #centro_log{
                border: none !important;
            }
            #celda_17,#celda_22{
                transform: rotate(270deg);
                    }
                    #celda_51,#celda_56{
                transform: rotate(90deg);
                    }
                    #celda_34, #celda_39{
                transform: rotate(180deg);
                    }
                    .ficha-panel canvas{
                        position: relative !important;
                        top:0 !important;
                        left: 0 !important;
                    }
                    .fichin{
                        position: relative !important;
                        width: 30px !important;
                        height: 30px !important;
                        text-align: center !important;
                    }
                    .fichina canvas{
                        width: 30px !important;
                        height: 30px !important;
                    }
        </style>
</head>
<body style="height: 100vh;width: 100%;padding: 0px;overflow: hidden;">
    <!-- <button type="button" class="btn btn-default btn-sm">
        <span class="glyphicon glyphicon-plus"></span> Plus
      </button> -->
    <div  id="panel_general"  style="min-height: 420px !important;min-width: 940px !important;"  old_top="0" old_left="0"   old_width="0" old_height="0" class="border rounded-3   p-0 pt-0 d-flex flex-column bg-black bg-gradient text-white ">
        <div class="d-flex h-auto justify-content-between m-0 mb-0">
            <!-- <h3 class="">General Lay - Parchis</h3> -->

                <div style="/* height: 50px !important; */" ctgr="Master_toolbar" id="" class="border border-outset border-3 rounded-3 d-flex justify-content-between bg-white bg-gradient text-black pt-1 p-0 gap-1 pe-2 w-50 flex-grow-1 m-0 me-0 mt-0">
                    
                    <div class="d-flex w-25">
                    <button id="boton_toggle_1" onclick="if(this.innerHTML=='‚óÅ'){this.innerHTML='‚ñ∑';this.style=''; }else{this.innerHTML='‚óÅ';this.style='';};show_hide('panel_lateral');" class="btn bt-sm  btn-black text-black rounded-5 border-0 border-black ms-2 p-1 pt-0 pb-0 ps-2 pe-2 fs-5">‚óÅ</button>
                    <h6 class="mt-3">Parchis</h6>

                    <!-- <button class="btn btn-warning border">Go</button> -->
                    <!-- <button class="btn border btn-success">Go</button> -->
                    <div style="border: inset 4px !important;" class=" flex-grow-1 d-flex gap-2 ps-2 pe-2 bg-black mt-2 m-1 ms-2 me-0 border border-0 rounded-4">
                        <!-- <button onclick="if(this.innerHTML=='‚óÅ'){this.innerHTML='‚ñ∑';this.style='background-color:white;color:black !important'; }else{this.innerHTML='‚óÅ';this.style='';};show_hide('panel_lateral');" class="btn bt-sm  btn-black text-white rounded-5 border border-black me-2 mt-1 mb-1 p-1 pt-1 pb-1 ps-2 pe-2">‚óÅ</button> -->
                        <button onclick="crear_tablero()" class="btn btn-sm border border-outset border-0 border-black rounded-3 text-white ">Board</button>
                        <button onclick="carga_celdas()" class="btn btn-sm border border-outset border-0 border-black rounded-3 text-white ">Cells</button>
                        <button id="boton_auto" onclick="rellena_select('jugadores');rellena_fichas();crear_tablero();carga_celdas(); boton_toggle_1.click();boton_toggle_2.click();" class="btn btn-sm border border-outset border-0 border-black rounded-3 text-white ">Auto</button>
                        <!-- <i class="material-icons" style="font-size:48px;color:red">add</i> -->
                        
                        <!-- <button onclick="crear_partida_parchis()" class="btn btn-sm btn-success bg-gradient border text-white p-0 pe-2 ps-2 m-1">Start SS</button> -->
        
                    </div>

                    </div>

                    <div  class="  d-flex w-50 flex-grow-1">

                        <div   class="rounded-5 border-outset d-flex text-white bg-black border mt-1 mb-1 ps-5 w-100">
                            <!-- <button  style="border: inset 4px !important;" name=0 onclick="if(this.name==4){this.name=0};tira_dadoold();this.name=parseInt(this.name) +1;dado_valor.className='disabled fs-6 mt-1 w-50  ms-5  border p-0 m-0 btn btn-sm btn-'+colores[this.name-1];" class="bg-black d-flex text-center ps-5 pt-0 pb-0 text-white w-100 fs-4 btn btn-sm border justify-content-evenly rounded-4 ">üé≤ <input id="dado_valor" class=" w-50 btn disabled btn-secondary fs-6 mt-1 ms-5 border p-0 mb-0" disabled type="text"></button> -->
                            <!-- <button id="boton_dado" name=0 onclick="let cuenta_1=colores_seleccionados.length; if(this.name==cuenta_1){this.name=0};tira_dadoold();this.name=parseInt(this.name) +1;dado_valor3.className=' rounded-5   w-100 text-center bg-gradient bg-'+colores_seleccionados[this.name-1];" class="w-50 text-center border-0  mt-0 bg-white ">üé≤</button> -->
                            <button id="boton_dado" name=0 onclick="" class="w-25 fs-3 text-center border-0 bg-black  mt-0 ">üé≤</button>

                            <div class="border-0 d-flex   m-0 flex-grow-1 text-center  p-0">
                                <input class="bg-secondary rounded-5 text-center w-75 bg-gradient" id="dado_valor3" value="1"/>
                            </div>
                        
                        </div>
                        <!-- <button name=0 onclick="if(this.name==4){this.name=0};tira_dadoold();this.name=parseInt(this.name) +1;dado_valor.className='fs-1 w-100 h-100 ms-5  border p-0 m-0 btn btn-'+colores[this.name-1];" class="d-flex text-center ps-5 text-white w-100 fs-1 btn border h-100  ">üé≤ <input id="dado_valor" class="h-100 w-100 btn disabled btn-secondary ms-5 border p-0 m-0" disabled type="text"></button> -->
        
                        <!-- <button onclick="crear_tablero();crea_fichas();carga_celdas();carga_canvas();recalcula_fichas();" class="btn btn-success bg-gradient btn-sm w-auto m-1 me-3">Start</button>
        
                    <button onclick="crear_tablero()" class="btn btn-warning bg-gradient btn-sm w-auto m-1">Carga Tablero</button>
                    <button onclick="crea_fichas()" class="btn btn-warning bg-gradient btn-sm w-auto m-1">Carga Fichas</button>
                    <button onclick=" recalcula_fichas()" class="btn border border-3 bg-white bg-gradient btn-sm  m-1">Recalcula</button>
                
                    <button onclick="carga_celdas()" class="btn btn-warning bg-gradient btn-sm w-auto m-1">Carga Celdas</button>
                    <button onclick="carga_canvas()" class="btn btn-primary bg-gradient btn-sm  m-1">Canvas</button>
                    <button onclick="carga_config(this.parentElement.parentElement.id)" class="btn bt-sm  btn-primary border border-black mt-1 mb-1 p-1 pt-1 pb-1">Load</button> -->
                    </div>
                    <div class=" w-25 d-flex justify-content-end">
        
                    <!-- <button onclick="carga_config('panel_lateral_1')" class="btn bt-sm  btn-primary border border-black mt-1 mb-1 p-1 pt-1 pb-1">Load</button> -->
                    <!-- <button onclick="if(this.innerHTML=='‚óÅ'){this.innerHTML='‚ñ∑';this.style='';}else{this.innerHTML='‚óÅ';this.style='background-color:white;color:black ! important';};show_hide('panel_lateral_i');" class="btn bt-sm  btn-black text-white border rounded-5 border-black mt-1 mb-1 p-1 pt-1 pb-1 pe-2 ps-2">‚ñ∑</button> -->
                    <div class="d-flex justify-content-end gap-2 h-50  mt-0">
                        <button   id="boton_toggle_2"  onclick="var text_01='top:0;left:0;height:'+(window.innerHeight-10)+'px !important;';  document.getElementById('panel_general').style=text_01;recalcula_fichas();" class=" btn btn-sm border border-0 border-outset rounded-5  border-white mt-0 mb-0 p-0` pt-0 pb-1 w-100 fs-3">+</button>
                        <!-- <button onclick="document.getElementById('panel_general').style='top:5%;left:5%;width:70%;height:70%;min-height: 400px !important;';recalcula_fichas();"class=" btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0 p-0` pt-0 pb-1 w-100 fs-3">-</button> -->
                        <button onclick="document.getElementById('panel_general').style=' top: 20px;left: 20px;width: 94%; height: 550px !important; min-height: 236px !important;';recalcula_fichas();"class=" btn btn-sm border border-0 border-outset rounded-5  border-white mt-0 mb-0 p-0` pt-0 pb-1 w-100 fs-3">-</button>
                    </div>
                                        <button onclick="if(this.innerHTML=='‚ñ∑'){this.innerHTML='‚óÅ';this.style=''; }else{this.innerHTML='‚ñ∑';this.style='';};show_hide('panel_lateral_i');" class="btn bt-sm  btn-black text-black rounded-5 border-0 border-black ms-2  p-1 pt-0 pb-0 ps-2 pe-2 fs-5">‚ñ∑</button>

                    </div>
                    <!-- <i class="material-icons">cloud</i> -->
                </div>

  
        </div>
        <div ctgr="Master" id="" class="border-0 rounded-3 text-white bg-black bg-gradient flex-grow-1 w-100 d-flex flex-column items-stretch justify-content-between gap-0 p-1 overflow-y-auto">
            <!-- <h2>Master</h2>  -->

             
             <div ctgr="Master_paneles" id="" class="border-0 h-100 w-100 d-flex items-stretch justify-content-evenly gap-1 p-0  m-0 overflow-y-auto">


                 <div  ctgr="Master_panel" id="panel_lateral"  old_top="0" old_left="0"   old_width="0" old_height="0" class="border border-3 rounded w-25 flex-grow-1 d-flex flex-column  p-1 gap-1 overflow-y-auto">
                    <div ctgr="Master_panel_toolbar"  class="border-bottom d-flex justify-content-between p-1 m-0">
                        <div ctgr="Master_panel_toolbar"  class="border-0 d-flex justify-content-evenly gap-2">
                            <button onclick="show_hide('panel_central_i_2')" class="btn btn-sm  btn-danger text-white border rounded-5  border-black mt-1 mb-1 p-2 pt-1 pb-1">Jugadores</button>
                            <button onclick="show_hide('panel_central_i_1')" class="btn btn-sm  btn-warning text-black border rounded-5  border-black mt-1 mb-1 p-2 pt-1 pb-1 ">Fichas</button>
                            <button onclick="show_hide('panel_central_i_3')" class="btn btn-sm  btn-primary text-white border rounded-5 border-black mt-1 mb-1 p-2 pt-1 pb-1">Dado</button>
         
                        </div>
                        <div class="d-flex gap-2 justify-content-evenly me-3">
                        <button class="maximiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0 p-0` pt-0 pb-1 w-100 fs-5">+</button>
                        <button class="minimiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0  p-0  pt-0 pb-1 w-100 fs-5">-</button>
        
                        </div>
                    </div>
                    <div ctgr="Master_panel_boxes"  class="border-0 d-flex flex-column gap-2 h-auto flex-grow-1 overflow-auto pt-0 p-1">
                        
                        <div id="panel_central_i_2"  class="border border-danger border-1 rounded-3  p-2 d-flex flex-column h-auto  overflow-auto bg-danger bg-gradient" >
                            <!-- <h3 name="config_detail2" onclick="show_hide2('config_central_i2')">Config2</h3>
                                <div  class="border border-5 p-1 h-100 overflow-auto " id="config_central_i2">2</div> -->
                        </div>
                        
                        <div id="panel_central_i_1"  style="" class="border border-warning border-5 rounded-3 p-0 d-flex flex-grow-1 h-25  flex-column bg-black bg-gradient gap-0" >
                            <div style="zoom: .8;" ctgr="Master_panel_toolbar"  class="border border-bottom rounded bg-black d-flex justify-content-between ps-2 p-1 m-0 gap-2 border-white w-100 h-auto overflow-x-auto ">
                                <h4  onclick="show_hide2('fichas_detail')"  class="text-white ps-2 ms-2 me-2 mt-2">Fichas</h4>
                                <!-- <button onclick="rellena_fichas()"   class="btn btn-sm bg-success bg-gradient border text-white p-0 pe-2 ps-2 m-2">Carga</button> -->
                                <i onclick="rellena_fichas();this.className='material-icons mt-1 me-3 text-white'" class="material-icons mt-1 me-3 text-primary " style="font-size:40px">cloud_download</i>
                                <div ctgr="Master_panel_toolbar"  class="border-0 d-flex justify-content-evenly gap-2 m-0 p-1">
                                    <!-- <button onclick="show_hide3('config_central_i_l_1',1)" class="btn btn-sm    bg-gradient text-white border rounded-5 p-0 m-0  border-black ">
                                        <i class="material-icons" style="font-size:20px;color:red">add</i>
                                    </button> -->
                                    <i  onclick="show_hide3('config_central_i_l_2_success',2)"  class="rellena-f-success material-icons p-1 bg-success bg-gradient rounded-5" style="font-size:30px">remove</i>
                                    <i  onclick="show_hide3('config_central_i_l_2_warning',3)"  class="rellena-f-warning material-icons p-1 bg-warning bg-gradient rounded-5" style="font-size:30px">remove</i>
                                    <i  onclick="show_hide3('config_central_i_l_2_danger',4)"  class="rellena-f-danger material-icons p-1 bg-danger bg-gradient rounded-5" style="font-size:30px">remove</i>
                                    <i  onclick="show_hide3('config_central_i_l_2_primary',5)"  class="rellena-f-primary material-icons p-1 bg-primary bg-gradient rounded-5" style="font-size:30px">remove</i>

                                    <!-- <button onclick="show_hide3('config_central_i_l_2',2)" class="btn btn-sm  btn-warning text-white border rounded-5  border-black  pt-2">
                                        <i class="material-icons" style="font-size:20px;color:red">remove</i>

                                    </button>
                                    <button onclick="show_hide3('config_central_i_l_3',3)" class="btn btn-sm  btn-danger text-white border rounded-5 border-black mt-1 mb-1 p-2 pt-1 pb-1">-</button>
                                    <button onclick="show_hide3('config_central_i_l_4',4)" class="btn btn-sm  btn-primary text-white border rounded-5 border-black mt-1 mb-1 p-2 pt-1 pb-1">-</button> -->

                                </div>
                                <div class="d-flex gap-2 justify-content-evenly me-3">
                                <button class="maximiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0 p-0` pt-0 pb-1 w-100 fs-5">+</button>
                                <button class="minimiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0  p-0  pt-0 pb-1 w-100 fs-5">-</button>
                
                                </div>
                            </div>
                            <div id="fichas_detail" class="d-flex flex-wrap h-75 overflow-auto    bg-black bg-gradient gap-2 p-1 mt-1 flex-grow-1">
                                <!-- <div class="d-flex border rounded-3 m-0 border-2 p-1  w-50 overflow-auto m-0" id="config_central_i_l_1">
                                    <div class="border bg-success bg-gradient h-100 w-100"
                                        >1</div>
                                
                                </div>
                                <div class="border rounded-3 m-0 border-2 p-1  w-50 overflow-auto m-0"  id="config_central_i_l_2">
                                    <div class="border bg-warning bg-gradient h-100 w-100"
                                       >2</div>
                                
                                </div>
                                <div class="border rounded-3 m-0 border-2 p-1  w-50 overflow-auto m-0" id="config_central_i_l_3">
                                    <div class="border bg-danger bg-gradient " >3
                                    </div>
                                
                                </div>
                                <div class="border rounded-3 m-0 border-2 p-1  w-50 overflow-auto m-0"   id="config_central_i_l_4">
                                    <div class="border bg-primary bg-gradient "
                                       >4</div>
                                
                                </div> -->



                            </div>

                        </div>

                        <div id="panel_central_i_3"   style="display: none !important;" class="border border-outset border-primary rounded-3 border-5 p-1 d-flex flex-column h-25 overflow-auto bg-black bg-gradient" >
                            <!-- <h4 class="w-100 border-bottom" name="config_detail3" onclick="show_hide2('config_central_i3')">Dado</h4>
                                <div  class="border border-0 p-1  h-100 overflow-auto  d-flex items-stretch" id="config_central_3">
                                    <button  style="border: inset 4px !important;" name=0 onclick="let cuenta_1=colores_seleccionados.length; if(this.name==cuenta_1){this.name=0};tira_dadoold();this.name=parseInt(this.name) +1;dado_valor2.className='disabled fs-1 mt-1 w-50 h-75  ms-5  mb-2 border p-0 m-0 btn btn-sm btn-'+colores_seleccionados[this.name-1];" class="bg-black d-flex text-center ps-5 pt-2 pb-0 text-red h-100 w-100 fs-1 btn btn-sm border justify-content-evenly rounded-4 "><div class="mt-0"> üé≤</div><input id="dado_valor2" class=" w-50 h-75 btn disabled btn-secondary fs-1 mt-1 ms-5 border p-0 mb-0" disabled type="text"></button>

                                </div> -->
                        </div>
                    </div>
                 </div>
                 <div ctgr="Master_panel" id="panel_central" class="border  border-outset border-3 rounded-3 d-flex flex-column w-50 overflow-auto p-0  ">

                 </div>
                 <div ctgr="Master_panel" id="panel_lateral_i" class="border border-outset border-3 rounded-3 w-25 flex-grow-1 d-flex flex-column gap-1 p-1 ">
                    <div ctgr="Master_panel_toolbar"  class="border-bottom d-flex justify-content-between p-1 m-0">
                        <div ctgr="Master_panel_toolbar"  class="border-0 d-flex justify-content-evenly gap-2">
                            <button onclick="show_hide2('panel_lateral_i_1')" class="btn btn-sm  btn-warning text-black border rounded-5  border-black mt-1 mb-1 p-2 pt-1 pb-1">Log</button>
                            <button onclick="show_hide2('panel_lateral_i_2')" class="btn btn-sm  btn-danger text-black border rounded-5  border-black mt-1 mb-1 p-2 pt-1 pb-1">Dado</button>
                            <button onclick="show_hide2('panel_lateral_i_3')" class="btn btn-sm  btn-primary text-black border rounded-5 border-black mt-1 mb-1 p-2 pt-1 pb-1">Partida</button>
         
                        </div>
                        <div class="d-flex gap-2 justify-content-evenly me-3">
                        <button class="maximiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0 p-0` pt-0 pb-1 w-100 fs-5">+</button>
                        <button class="minimiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0  p-0  pt-0 pb-1 w-100 fs-5">-</button>
        
                        </div>
                    </div>
                    <div ctgr="Master_panel_boxes"  class="border-0 d-flex flex-column gap-2 h-auto flex-grow-1 overflow-auto pt-0 p-1">
                        <div id="panel_lateral_i_1" class="border border-warning border-5 rounded-3 p-0 d-flex flex-column h-50 flex-grow-1 bg-warning bg-gradient gap-1" >
                            <div style="zoom: .8;" ctgr="Master_panel_toolbar"  class="border-bottom rounded bg-black d-flex justify-content-between ps-2 p-1 m-0 gap-2">
                                <div ctgr="Master_panel_toolbar"  class="border-0 d-flex justify-content-evenly gap-2 m-0 p-0">
                                    <button onclick="show_hide2('config_detail_i_l_1')" class="btn btn-sm   bg-success bg-gradient text-success border rounded-5  border-black mt-1 mb-1 p-2 pt-1 pb-1">1</button>
                                    <button onclick="show_hide2('config_detail_i_l_2')" class="btn btn-sm  btn-secondary text-secondary border rounded-5  border-black mt-1 mb-1 p-2 pt-1 pb-1">2</button>
                                    <button onclick="show_hide2('panel_lateral_i_3')" class="btn btn-sm  btn-primary text-primary border rounded-5 border-black mt-1 mb-1 p-2 pt-1 pb-1">3</button>
                 
                                </div>
                                <div class="d-flex gap-2 justify-content-evenly me-3">
                                <button class="maximiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0 p-0` pt-0 pb-1 w-100 fs-5">+</button>
                                <button class="minimiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0  p-0  pt-0 pb-1 w-100 fs-5">-</button>
                
                                </div>
                            </div>
                             <div  class="d-flex flex-column  border bg-success bg-gradient rounded-3 m-0 border-2 p-0 h-100 overflow-hidden" id="config_detail_i_l_1">
                                <div class="d-flex flex-column h-100 ">
                                    <div class="d-flex gap-3 justify-content-end w-auto me-3">
                                        <button onclick="id_textarea.value='';contador_texto=0;" class=" btn btn-sm border border-0 border-outset rounded-5  border-white text-white me-3 pt-2">
                                            <i class="material-icons" style="font-size:20px;color:red">delete</i>

                                        </button>
                                        <button class="maximiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0 p-0 pt-0 pb-1  fs-5">+</button>
                                        <button class="minimiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0  p-0  pt-0 pb-1  fs-5">-</button>
                        
                                    </div>
                                    <textarea class="border flex-grow-1  bg-black bg-gradient border-4 border-warning m-1 mt-1 rounded-3" id="id_textarea"></textarea>

                                </div>
                            </div>
                             <div  style="display: none !important;"  class="border bg-secondary bg-gradient rounded-3 m-0 border-2 p-1 h-100 overflow-auto" id="config_detail_i_l_2">
                                <div class="d-flex justify-content-end">
                                    <div class="d-flex gap-2 justify-content-end w-auto me-3">
                                        <button class="maximiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0 p-0` pt-0 pb-1 w-100 fs-5">+</button>
                                        <button class="minimiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0  p-0  pt-0 pb-1 w-100 fs-5">-</button>
                        
                                    </div>
                                </div>
                             </div>

                        </div>
                        <div id="panel_lateral_i_2"  style=""  class="border border-danger border-1 rounded-3  p-1 d-flex flex-column   flex-grow-1  overflow-auto bg-danger bg-gradient" >
                            <h3 name="config_detail2" onclick="show_hide2('config_detail_i2')">Dado</h3>
                                <div  class="border-0 border-5 p-0 overflow-hidden" id="config_detail_i2">
                                    <div  class="d-flex flex-column  border bg-secondary bg-gradient rounded-3 m-0 border-2 p-1 flex-grow-1 overflow-auto" id="config_detail_i2_l_1">
                                        <div class="d-flex h-auto justify-content-end">
                                            <div class="d-flex gap-2 justify-content-end w-auto me-3">
                                                <button class="maximiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0 p-0` pt-0 pb-1 w-100 fs-5">+</button>
                                                <button class="minimiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0  p-0  pt-0 pb-1 w-100 fs-5">-</button>
                                
                                           

                                            </div>
                                        </div>
                                        <div class="border  overflow-auto flex-grow-1 m-0 mt-0 w-100 rounded-2 d-flex p-1 gap-1">
                                            <!-- <button id="boton_dado" name=0 onclick="let cuenta_1=colores_seleccionados.length; if(this.name==cuenta_1){this.name=0};tira_dadoold();this.name=parseInt(this.name) +1;dado_valor3.className=' rounded-5 fs-1  w-100 text-center bg-gradient bg-'+colores_seleccionados[this.name-1];" class="w-50 text-center border-0 fs-1 mt-0 bg-secondary bg-gradient">üé≤</button>
                                            <div class="border-0 d-flex   m-2 flex-grow-1 text-center fs-1 p-0">
                                                <input class="bg-secondary rounded-5 text-center w-75 bg-gradient" id="dado_valor3" value="1"/>
                                            </div> -->
                                        </div>
                                    </div>
                     
                                     <div style="" class="border bg-secondary bg-gradient rounded-3 m-0 border-2 p-1 h-100 d-flex flex-column " id="config_detail_i2_l_2">
                                        <div class="d-flex justify-content-end">
                                            <div class="d-flex gap-2 justify-content-end w-auto me-3">
                                                <button class="maximiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0 p-0` pt-0 pb-1 w-100 fs-5">+</button>
                                                <button class="minimiza btn btn-sm border border-0 border-outset rounded-5  border-white text-white mt-0 mb-0  p-0  pt-0 pb-1 w-100 fs-5">-</button>
                                
                                            </div>
     
                                        </div>
                                        <div class="h-75 overflow-auto">

                                        </div>
                                     </div>
                                </div>
                        </div>
                        <div id="panel_lateral_i_3" style="display: none !important;"  class="border rounded-3 border-5 p-1 d-flex flex-column h-50 flex-shrink-1  overflow-auto bg-primary bg-gradient" >
                            <!-- <h3 name="config_detail3" onclick="show_hide2('config_detaili_3')">Config3</h3> -->
                                <div  class="border-0 border-5 p-1 h-100 overflow-auto flex-grow-1 d-flex flex-column" id="config_detaili_3">
                                    <h4 class="w-100 border-bottom" name="config_detail3" onclick="show_hide2('config_central_3')">Dado</h4>
                                    <div  class="border border-2 p-1  h-100 overflow-auto  d-flex items-stretch" id="config_central_3">
                                        <!-- <button  style="border: inset 4px !important;" name=0 onclick="let cuenta_12=colores_seleccionados.length; if(this.name==cuenta_12){this.name=0};tira_dadoold();this.name=parseInt(this.name) +1;dado_valor2.className='disabled fs-1 mt-1 w-75 h-75  ms-3  mb-2 border p-0 m-0 btn btn-sm btn-'+colores_seleccionados[this.name-1];" class="bg-black d-flex  text-center ps-1 pt-2 pb-0 text-red h-100 w-100 fs-1 btn btn-sm border justify-content-evenly rounded-4 "><div class="ms-2 mt-0 w-25"> üé≤</div><input id="dado_valor2" class=" w-75 h-75 btn disabled btn-secondary fs-1 mt-1 ms-1 border p-0 mb-0" disabled type="text"></button> -->
    
                                    </div>
                                </div>
                        </div>
                    </div>
    
    
    
                 </div>

             </div>
    
         </div>
    </div>
    <script>
        var contador_texto=1;
                var ficha_seleccionada, celda_seleccionada;

                const colores = ["danger", "warning", "success", "primary"]
                const colores_sp = ["rojas", "amarillas", "verdes", "azules"]
                var colores_seleccionados=[]
         jQuery(".maximiza").click(function (event) {
            // alert(this.parentElement.parentElement.getElementsByTagName("DIV")[1].id) 
            const text_origen=this.parentElement.parentElement.parentElement
            const text_id =  this.parentElement.parentElement.parentElement.id
            //$(text_id).toggle()
            document.getElementById(text_id).style.position="absolute"
            document.getElementById(text_id).setAttribute("old_top",document.getElementById(text_id).offsetTop )
            document.getElementById(text_id).setAttribute("old_left",document.getElementById(text_id).offsetLeft)
            document.getElementById(text_id).setAttribute("old_width",document.getElementById(text_id).offsetWidth)
            document.getElementById(text_id).setAttribute("old_height",document.getElementById(text_id).offsetHeight )

            document.getElementById(text_id).style=
            "z-index:300;position:absolute !important;top:55px !important;left:0px !important;height:"+ (window.innerHeight-65)+"px !important;width:100% !important;background-color:black;color:white"
            //document.getElementById(text_id).style.left="0px !important;"

            // alert(
            //     "Origen: " + this.className.split(" ")[0] + "\n" +
            //     "id_destino: " + text_id + "\n" +
            //     "Top: " + document.getElementById(text_id).offsetTop + "\n" +
            //     "Left: " + document.getElementById(text_id).offsetLeft + "\n" +
            //     "Width: " + document.getElementById(text_id).offsetWidth + "\n" +
            //     "Height: " + document.getElementById(text_id).offsetHeight + "\n" 

            // )
            // alert(
            //     "Origen: " + this.className.split(" ")[0] + "\n" +
            //     "id_destino: " + text_id + "\n" +
            //     "old_Top: " + document.getElementById(text_id).getAttribute("old_top") + "\n" +
            //     "old_Left: " + document.getElementById(text_id).getAttribute("old_left") +"\n" +
            //     "old_Width: " + document.getElementById(text_id).getAttribute("old_width") +"\n" +
            //     "old_Height: " +  document.getElementById(text_id).getAttribute("old_height") +"\n" 

            //     )          
            recalcula_fichas() 
        });
        jQuery(".minimiza").click(function (event) {
        // alert(this.parentElement.parentElement.getElementsByTagName("DIV")[1].id) 
        const text_origen=this.parentElement.parentElement.parentElement

        const text_id =  this.parentElement.parentElement.parentElement.id
        //$(text_id).toggle()
        // this.old_top=document.getElementById(text_id).offsetTop 
        //     this.old_left=document.getElementById(text_id).offsetLeft
        //     this.old_width=document.getElementById(text_id).offsetWidth
        //     this.old_height=document.getElementById(text_id).offsetHeight 
           
        document.getElementById(text_id).setAttribute("style","")
        // "position:unset;"+
        //     "top:"+
        //     document.getElementById(text_id).getAttribute("old_top") +
        //     "px !important;"+
        //     "left:"+
        //     document.getElementById(text_id).getAttribute("old_left")+
        //     "px !important;"+
        //     "height:" +
        //     document.getElementById(text_id).getAttribute("old_height") +
        //     "px !important;"+
        //     "width:"+
        //     document.getElementById(text_id).getAttribute("old_width")+
        //     "px !important;"
        
           
        
        
        // alert(
        //        "Origen: " + this.className.split(" ")[0] + "\n" +
        //        "id_destino: " + text_id + "\n" +
        //        "Top: " + document.getElementById(text_id).offsetTop + "\n" +
        //        "Left: " + document.getElementById(text_id).offsetLeft + "\n" +
        //        "Width: " + document.getElementById(text_id).offsetWidth + "\n" +
        //        "Height: " + document.getElementById(text_id).offsetHeight + "\n" 

        //     )
        //     alert(
        //         "Origen: " + this.className.split(" ")[0] + "\n" +
        //         "id_destino: " + text_id + "\n" +
        //         "old_Top: " + this.old_top + "\n" +
        //         "old_Left: " + this.old_left + "\n" +
        //         "old_Width: " + this.old_width + "\n" +
        //         "old_Height: " + this.old_height + "\n" 

        //         ) 
        recalcula_fichas() 
        });
        
        
        jQuery("#panel_general").resize(function (event) {
            rtime = new Date();
            if (timeout === false) {
                timeout = true;
                setTimeout(resizeend, delta);
            }
        });
        var rtime;
        var timeout = false;
        var delta = 200;
        function resizeend() {
            if (new Date() - rtime < delta) {
                setTimeout(resizeend, delta);
            } else {
                timeout = false;
                 recalcula_fichas()
                // alert('Done resizing');
                id_textarea.value =
                "************************************************************* \n" +
                "**             Elemento: " + contador_texto +" >> resizing \n" +
                "************************************************************* \n" +

                " RESIZING" + "\n" +
                    "Id: \n" +
                    "tt" + "\n" +
                    'Done resizing \n' +
                    "Width: " + this.offsetWidth + "\n" +
                    "Height: " + this.offsetHeight + "\n" +
                    // "************************************************************ \n" +
                    id_textarea.value
                // alert(tablero2.offsetHeight +"-" +panel_conf.offsetWidth )
              //  panel_conf.offsetHeight = panel_conf.offsetWidth
              contador_texto+=1
            }
        }

        
        function show_hide(id_pass){
            try{
                if(document.getElementById(id_pass).style.display==""){
                    document.getElementById(id_pass).style="display:none !important;";

                }
                else{
                    document.getElementById(id_pass).style="";

                }
            }
            catch{
                document.getElementById(id_pass).style="display:none !important;"

            }
            recalcula_fichas()

        }
        function show_hide2(id_pass,item){
  //  alert(this.innerHTML)
    try{
        if(document.getElementById(id_pass).style.display==""){
    
  //alert("show_hide2-[item-1].innerHTML: " + document.getElementById(id_pass).parentElement.parentElement.getElementsByTagName("div")[0].getElementsByTagName("button")[1].innerHTML)

    //    alert(document.getElementById(id_pass).getElementsByTagName("div")[1].)
            document.getElementById(id_pass).style="display:none !important;";
           // this.innerHTML="-"
       //    document.getElementById(id_pass).parentElement.getElementsByTagName("div")[0].getElementsByTagName("button")[item-1].innerHTML="+"
         document.getElementById(id_pass).parentElement.parentElement.getElementsByTagName("div")[0].getElementsByTagName("button")[item-1].innerHTML="+"

        }
        else{
        
            document.getElementById(id_pass).style="";
            //this.innerHTML="+"
           // alert("show_hide2-this.innerHTML: "+this.innerHTML)
         //   alert("show_hide2-[item-1].innerHTML: " + document.getElementById(id_pass).parentElement.getElementsByTagName("div")[0].getElementsByTagName("button")[item-1].innerHTML)
            document.getElementById(id_pass).parentElement.parentElement.getElementsByTagName("div")[0].getElementsByTagName("button")[item-1].innerHTML="-"

        }

    }

    catch{
       // alert("show_hide2-no: "+id_pass)
      // alert("show_hide2-[item-1].innerHTML: " + document.getElementById(id_pass).parentElement.getElementsByTagName("div")[0].getElementsByTagName("button")[item-1].innerHTML)
       document.getElementById(id_pass).parentElement.parentElement.getElementsByTagName("div")[0].getElementsByTagName("button")[item-1].innerHTML="+"

        document.getElementById(id_pass).style="display:none !important;"

    }
       
}
        function show_hide3(id_pass,item){
    // alert(
    //     "Item: " +
    //     item + "\n" +

    //     "id_pass: "+
    //     id_pass + "\n"
    
    // )
    try{
        if(document.getElementById(id_pass).style.display==""){
    //         alert(
    //     "show_hide3-[item-1].innerHTML: "  +
    //     document.getElementById(id_pass).parentElement.parentElement.getElementsByTagName("i")[item-1].innerHTML + "\n" +

    //     "id_pass: "+
    //     id_pass + "\n"
    // )
            document.getElementById(id_pass).parentElement.parentElement.getElementsByTagName("i")[item-1].innerHTML="add"

                        //      alert("show_hide3-[item-1].innerHTML: " + document.getElementById(id_pass).parentElement.getElementsByTagName("i")[item-1].innerHTML)
         //   document.getElementById(id_pass).parentElement.getElementsByTagName("div")[1].getElementsByTagName("button")[item-1].innerHTML="+"

            document.getElementById(id_pass).style="display:none !important;";
  
        }
        else{
                //    document.getElementById(id_pass).parentElement.getElementsByTagName("div")[1].getElementsByTagName("button")[item-1].innerHTML="-"
                document.getElementById(id_pass).parentElement.parentElement.getElementsByTagName("i")[item-1].innerHTML="remove"

            document.getElementById(id_pass).style="";
          //  this.innerHTML="+"
            //alert("show_hide3-this.innerHTML: "+this.innerHTML)
           // alert("show_hide3-[item-1].innerHTML: " + document.getElementById(id_pass).parentElement.getElementsByTagName("div")[1].getElementsByTagName("button")[item-1].innerHTML)

        }

    }

    catch{
       // alert("no"+id_pass)
           //   document.getElementById(id_pass).parentElement.getElementsByTagName("div")[1].getElementsByTagName("button")[item-1].innerHTML="+"

           document.getElementById(id_pass).parentElement.parentElement.getElementsByTagName("i")[item-1].innerHTML="add"

        document.getElementById(id_pass).style="display:none !important;"
      // alert("show_hide3-[item-1].innerHTML: " + document.getElementById(id_pass).parentElement.getElementsByTagName("div")[1].getElementsByTagName("button")[item-1].innerHTML)

    }
    //recalcula_fichas()
       
}


        function crear_tablero() {
            // document.ge
            //Tablero 2
            document.getElementById("panel_central").innerHTML=""
            crea_elemento("panel_central", "div", "tablero2", " rounded-3 border border-5 m-0 w-100  h-100 d-flex flex-column items-stretch  justify-content-evenly gap-0 p-0", "")
            panel_destino.innerHTML+= texto_final
            //Lineas
            for (let j = 1; j < 4; j++) {
                crea_elemento("tablero2", "div", "tablero_linea_" + j, "tablero-linea border rounded h-100 d-flex flex-row items-stretch  justify-content-evenly m-0 gap-0 p-0", "")
                panel_destino.innerHTML += texto_final
                //Cuadros
                for (let i = 1; i < 4; i++) {
                    crea_elemento("tablero_linea_" + j, "div", "tablero_linea_" + j + "_cuadro_" + i, "linea-cuadro border rounded-3 w-100 h-100 p-0 d-flex justify-content-evenly gap-0", "")
                    panel_destino.innerHTML += texto_final
                }
            }

            //casa rojas
            crea_elemento("tablero_linea_1_cuadro_1", "div", "tablero_linea_1_cuadro_1_log", "border-0 bg-danger d-flex w-100 rounded-3 p-2 ", "")
            panel_destino.innerHTML += texto_final
            var contador_01 = 1
            for (let l = 1; l < 3; l++) {
                crea_elemento("tablero_linea_1_cuadro_1_log", "div", "tablero_linea_1_cuadro_1_" + l, "border-0 text-white d-flex flex-column w-100 gap-1 p-2", "")
                panel_destino.innerHTML += texto_final

                for (let m = 1; m < 3; m++) {
                    //crea_elemento("tablero_linea_1_cuadro_1_" + l, "div", "tablero_linea_1_cuadro_1_" + l, "celda border rounded-5 text-white w-100 h-100", l + "-" + m)

                    crea_elemento("tablero_linea_1_cuadro_1_" + l, "div", "danger_casa_" + contador_01, "celda celda-casa border rounded-5 text-danger w-100 h-100 gap-4", 34)

                    panel_destino.innerHTML += texto_final
                    contador_01 += 1
                }
            }
            //casa azules
            crea_elemento("tablero_linea_1_cuadro_3", "div", "tablero_linea_1_cuadro_3_log", "border-0 bg-primary bg-gradient d-flex w-100 rounded-3 p-2", "")
            panel_destino.innerHTML += texto_final
            var contador_01 = 1
            for (let l = 1; l < 3; l++) {
                crea_elemento("tablero_linea_1_cuadro_3_log", "div", "tablero_linea_1_cuadro_3_" + l, "border-0 text-white d-flex flex-column w-100 gap-1 p-2", "")
                panel_destino.innerHTML += texto_final

                for (let m = 1; m < 3; m++) {
                    crea_elemento("tablero_linea_1_cuadro_3_" + l, "div", "primary_casa_" + contador_01, "celda celda-casa border border-outset border-3 rounded-5 text-white w-100 h-100 gap-4", 17)// l + "-" + m)
                    panel_destino.innerHTML += texto_final
                    contador_01 += 1

                }
            }
            //casa verdes
            crea_elemento("tablero_linea_3_cuadro_1", "div", "tablero_linea_3_cuadro_1_log", "border-0 bg-success bg-gradient d-flex w-100 rounded-3 p-2 ", "")
            panel_destino.innerHTML += texto_final
            contador_01 = 1
            for (let l = 1; l < 3; l++) {
                crea_elemento("tablero_linea_3_cuadro_1_log", "div", "tablero_linea_3_cuadro_1_" + l, "border-0 text-white d-flex flex-column w-100 gap-1 p-2", "")
                panel_destino.innerHTML += texto_final

                for (let m = 1; m < 3; m++) {
                    crea_elemento("tablero_linea_3_cuadro_1_" + l, "div", "success_casa_" + contador_01, "celda celda-casa border rounded-5 text-success w-100 h-100 text-center gap-4", 51)
                    panel_destino.innerHTML += texto_final
                    contador_01 += 1
                }
            }
            //casa amarillas
            crea_elemento("tablero_linea_3_cuadro_3", "div", "tablero_linea_3_cuadro_3_log", "border-0 bg-warning bg-gradient d-flex w-100 rounded-3 p-2", "")
            panel_destino.innerHTML += texto_final
            var contador_01 = 1

            for (let l = 1; l < 3; l++) {
                crea_elemento("tablero_linea_3_cuadro_3_log", "div", "tablero_linea_3_cuadro_3_" + l, "border-0 text-white d-flex flex-column w-100 gap-1 p-2", "")
                panel_destino.innerHTML += texto_final

                for (let m = 1; m < 3; m++) {
                    crea_elemento("tablero_linea_3_cuadro_3_" + l, "div", "warning_casa_" + contador_01, "celda celda-casa border rounded-5 text-white w-100 h-100 text-center gap-4", 0)
                    panel_destino.innerHTML += texto_final
                    contador_01 += 1

                }
            }
            /* */

            /**/
            //casillas 1-1
            for (let b = 1; b < 4; b++) {
                crea_elemento("tablero_linea_1_cuadro_2", "div", "tablero_linea_1_cuadro_2_casillas_" + b, "border-0 w-100 h-100 d-flex flex-column", "")
                panel_destino.innerHTML += texto_final

                for (let c = 1; c < 8; c++) {
                    crea_elemento("tablero_linea_1_cuadro_2_casillas_" + b, "div", "", "celda border w-100 h-100 ", "")
                    panel_destino.innerHTML += texto_final

                }

            }
            document.getElementById("tablero_linea_1_cuadro_2_casillas_2").innerHTML = "<div class='bg-danger h-100 d-flex flex-column'>" + document.getElementById("tablero_linea_1_cuadro_2_casillas_2").innerHTML + "</div>"
            //casillas 3-1
            for (let b1 = 1; b1 < 4; b1++) {
                crea_elemento("tablero_linea_3_cuadro_2", "div", "tablero_linea_3_cuadro_2_casillas_" + b1, "border-0 w-100 h-100 d-flex flex-column", "")
                panel_destino.innerHTML += texto_final

                for (let c = 1; c < 8; c++) {
                    crea_elemento("tablero_linea_3_cuadro_2_casillas_" + b1, "div", "", "celda border w-100 h-100 p-0 m-0  ", "")
                    panel_destino.innerHTML += texto_final

                }
                // b1+=1
            }
            document.getElementById("tablero_linea_3_cuadro_2_casillas_2").innerHTML = "<div class='bg-warning h-100 d-flex flex-column'>" + document.getElementById("tablero_linea_3_cuadro_2_casillas_2").innerHTML + "</div>"
            //casillas 2-1
            document.getElementById("tablero_linea_2_cuadro_1").innerHTML = "<div id='tablero_linea_2_cuadro_1_log' class='d-flex flex-column w-100'>" + document.getElementById("tablero_linea_2_cuadro_1").innerHTML + "</div>"
            for (let b = 1; b < 4; b++) {
                crea_elemento("tablero_linea_2_cuadro_1_log", "div", "tablero_linea_2_cuadro_1_casillas_" + b, "border-0 w-100 h-100 d-flex ", "")
                panel_destino.innerHTML += texto_final
                // document.getElementById("tablero_linea_2_cuadro_1").innerHTML="<div class='d-flex flex-column'>"+     document.getElementById("tablero_linea_2_cuadro_1").innerHTML+"</div>"
                for (let s = 1; s < 8; s++) {
                    crea_elemento("tablero_linea_2_cuadro_1_casillas_" + b, "div", "", "celda border w-100 h-100 p-0 m-0  ", "")
                    panel_destino.innerHTML += texto_final
                }
            }
            document.getElementById("tablero_linea_2_cuadro_1_casillas_2").innerHTML = "<div class='bg-success d-flex w-100'>" + document.getElementById("tablero_linea_2_cuadro_1_casillas_2").innerHTML + "</div>"
            //casillas 2-3
            document.getElementById("tablero_linea_2_cuadro_3").innerHTML = "<div id='tablero_linea_2_cuadro_3_log' class='d-flex flex-column w-100'>" + document.getElementById("tablero_linea_2_cuadro_3").innerHTML + "</div>"
            for (let d = 1; d < 4; d++) {
                crea_elemento("tablero_linea_2_cuadro_3_log", "div", "tablero_linea_2_cuadro_3_casillas_" + d, "border-0 w-100 h-100 d-flex ", "")
                panel_destino.innerHTML += texto_final
                // document.getElementById("tablero_linea_2_cuadro_1").innerHTML="<div class='d-flex flex-column'>"+     document.getElementById("tablero_linea_2_cuadro_1").innerHTML+"</div>"
                for (let w = 1; w < 8; w++) {
                    crea_elemento("tablero_linea_2_cuadro_3_casillas_" + d, "div", "", "celda border w-100 h-100 p-0 m-0  ", "")
                    panel_destino.innerHTML += texto_final
                }
            }
            document.getElementById("tablero_linea_2_cuadro_3_casillas_2").innerHTML = "<div class='bg-primary d-flex w-100'>" + document.getElementById("tablero_linea_2_cuadro_3_casillas_2").innerHTML + "</div>"

            //centro
            document.getElementById("tablero_linea_2_cuadro_2").innerHTML = "<div id='centro_log' class='border-0 d-flex flex-column w-100'>" + document.getElementById("tablero_linea_2_cuadro_2").innerHTML + "</div>"
            for (let f = 1; f < 4; f++) {
                crea_elemento("centro_log", "div", "centro_casillas_" + f, "border-0 w-100 h-100 d-flex ", "")
                panel_destino.innerHTML += texto_final

                for (let o = 1; o < 4; o++) {
                    crea_elemento("centro_casillas_" + f, "div", "centro_casillas_" + f + "_" + o, "border w-100 h-100 d-flex flex-column", "")
                    panel_destino.innerHTML += texto_final

                    for (let p = 1; p < 3; p++) {
                        crea_elemento("centro_casillas_" + f + "_" + o, "div", "centro_casillas_" + f + "_" + o + "_" + p, "border-0 w-100 h-100 d-flex  ", "")
                        panel_destino.innerHTML += texto_final
                    }
                }

            }

        }
        function carga_celdas() {


        //amarillas 2
        i = 7
        Array.from(document.getElementById("tablero_linea_3_cuadro_2_casillas_3").getElementsByTagName("div")).forEach(element => {
            element.innerHTML=i
            element.id="celda_"+i
            // element.innerHTML = "<canvas class='celda w-100 h-100' id='celda_" + i + "'>" + i + "</canvas>"
            // makeImage(i, ("celda_" + i), "bold 60px Calibri ")
            i -= 1
        });

        //amarillas 1
        i = 61
        Array.from(document.getElementById("tablero_linea_3_cuadro_2_casillas_1").getElementsByTagName("div")).forEach(element => {
            // element.innerHTML = "<canvas class='celda w-100 h-100' id='celda_" + i + "'>" + i + "</canvas>"
            //  element.id="celda_"+i
            // makeImage(i, ("celda_" + i), "bold 60px Calibri ")
            element.innerHTML=i
            element.id="celda_"+i

            i += 1
        });

        //azules 1
        i = 24
        Array.from(document.getElementById("tablero_linea_2_cuadro_3_casillas_1").getElementsByTagName("div")).forEach(element => {
            //element.innerHTML= "<div class='d-flex flex-column justify-content-end h-100'><div  class='celda h-auto'>" +  i + "</div></div>"

            element.innerHTML=i
            element.id="celda_"+i
            // element.innerHTML = "<div class='d-flex flex-column justify-content-end h-100'><canvas class='celda w-100 h-100' id='celda_" + i + "'>" + i + "</canvas></div>"
            // makeImage(i, ("celda_" + i), "bold 60px Calibri ")

            i -= 1
        });
        //azules 2
        i = 10
        Array.from(document.getElementById("tablero_linea_2_cuadro_3_casillas_3").getElementsByTagName("div")).forEach(element => {

            element.innerHTML=i
            element.id="celda_"+i
            // element.innerHTML = "<div class='d-flex flex-column justify-content-end h-100'><canvas class='celda w-100 h-100' id='celda_" + i + "'>" + i + "</canvas></div>"
            // makeImage(i, ("celda_" + i), "bold 60px Calibri ")
            i += 1
        });

        //verdes 1
        i = 50
        Array.from(document.getElementById("tablero_linea_2_cuadro_1_casillas_1").getElementsByTagName("div")).forEach(element => {
            element.innerHTML=i

            //element.innerHTML= "<div class='d-flex flex-column justify-content-end h-100'><div class='h-auto'>" +  i + "</div></div>"
            element.id="celda_"+i
           // element.innerHTML = "<div class='d-flex flex-column justify-content-end h-100'><canvas class='celda w-100 h-100' id='celda_" + i + "'>" + i + "</canvas></div>"
            // makeImage(  i ,("celda_"+i),"bold 60px Calibri ") 
            //element.innerHTML="<canvas class='celda w-100 h-100' id='celda_"+i+"'>"+i+"</canvas>"
           // makeImage(i, ("celda_" + i), " 60px Calibri ")
            i -= 1
        });
        //verdes 2
        i = 52
        Array.from(document.getElementById("tablero_linea_2_cuadro_1_casillas_3").getElementsByTagName("div")).forEach(element => {

            element.innerHTML=i
            element.id="celda_"+i
            // element.innerHTML = "<canvas class='celda w-100 h-100' id='celda_" + i + "'>" + i + "</canvas>"
            // makeImage(i, ("celda_" + i), " 60px Calibri ")

            i += 1
        });

        //rojas 1
        i = 35
        Array.from(document.getElementById("tablero_linea_1_cuadro_2_casillas_1").getElementsByTagName("div")).forEach(element => {

            element.innerHTML=i
            element.id="celda_"+i
            // element.innerHTML = "<canvas class='celda w-100 h-100' id='celda_" + i + "'>" + i + "</canvas>"
            // makeImage(i, ("celda_" + i), "bold 60px Calibri ")
            i += 1
        });
        //rojas 2
        i = 33
        Array.from(document.getElementById("tablero_linea_1_cuadro_2_casillas_3").getElementsByTagName("div")).forEach(element => {

            element.innerHTML=i
            element.id="celda_"+i
            // element.innerHTML = "<canvas class='celda w-100 h-100' id='celda_" + i + "'>" + i + "</canvas>"
            // makeImage(i, ("celda_" + i), "bold 60px Calibri ")
            i -= 1
        });
        //centro 1-1
        i = 42
        //"centro_casillas_1_1"
        //   Array.from(document.getElementById("centro_casillas_1_1").getElementsByTagName("div")).forEach(element => {
        document.getElementById("centro_casillas_1_1_1").innerHTML = "<div class='d-flex justify-content-end w-100'><div id='celda_" + i + "' class='centro-casilla centro-casilla-right celda w-100 h-100'>" + i + "</div></div>"
        i += 1
        //});  

        document.getElementById("centro_casillas_1_1_2").innerHTML = "<div class='d-flex justify-content-start w-100'><div id='celda_" + i + "' class='centro-casilla celda  centro-casilla-left w-100 h-100 d-flex flex-column justify-content-end'>" + i + "</div></div>"

        //centro 3-1
        i = 59
        document.getElementById("centro_casillas_3_1_1").innerHTML = "<div class='d-flex justify-content-start w-100'><div id='celda_" + i + "' class='centro-casilla centro-casilla-left  celda w-100'>" + i + "</div></div>"
        i += 1
        document.getElementById("centro_casillas_3_1_2").innerHTML = "<div class='d-flex justify-content-end w-100'><div id='celda_" + i + "' class='centro-casilla centro-casilla-right  celda w-100 h-100 d-flex flex-column justify-content-end'>" + i + "</div></div>"
        //centro 3-3
        i = 9
        document.getElementById("centro_casillas_3_3_1").innerHTML = "<div class='d-flex justify-content-end w-100 ps-3'><div id='celda_" + i + "' class='centro-casilla  centro-casilla-right celda w-100'>" + i + "</div></div>"
        i -= 1
        document.getElementById("centro_casillas_3_3_2").innerHTML = "<div class='d-flex justify-content-start w-100'><div id='celda_" + i + "' class='centro-casilla  centro-casilla-left celda w-100 h-100 d-flex flex-column justify-content-end'>" + i + "</div></div>"
        //centro 1-3
        i = 26
        //                                                       
        document.getElementById("centro_casillas_1_3").innerHTML += "<canvas id='canvas_2' style='position:absolute;background-color: transparent; width: 10%;margin-top: 10px;margin-left: 10px;'>"
        document.getElementById("centro_casillas_1_3_1").innerHTML = "<div class='d-flex justify-content-start w-100'><div id='celda_" + i + "' class='centro-casilla centro-casilla-left  celda w-100'>" + i + "</div></div>"
        i -= 1
        document.getElementById("centro_casillas_1_3_2").innerHTML = "<div class='d-flex justify-content-end w-100'><div id='celda_" + i + "' class='centro-casilla  centro-casilla-right celda w-100 h-100 d-flex flex-column justify-content-end'>" + i + "</div></div>"


        ////verdes-casa-top
        document.getElementById("centro_casillas_2_1").innerHTML = "<div class='d-flex h-100 w-100 '><div class='d-flex justify-content-start w-100 bg-success h-100'></div><div  class='   w-100'></div></div>"
        ////azules-casa-top
        document.getElementById("centro_casillas_2_3").innerHTML = "<div class='d-flex h-100 w-100 '><div  class='   w-100'></div><div class='d-flex justify-content-start w-100 bg-primary h-100'></div></div>"
        ////amarillas-casa-top
        document.getElementById("centro_casillas_3_2_2").innerHTML = "<div class='d-flex justify-content-start w-100 bg-warning h-100'></div>"

        ////rojas-casa-top
        document.getElementById("centro_casillas_1_2_1").innerHTML = "<div class='d-flex justify-content-start w-100 bg-danger h-100'></div>"


        ////verdes-casa-bottom                                  <div class='celda bg-black border w-100 h-100 p-0 m-0'>
        document.getElementById("tablero_linea_2_cuadro_1_casillas_2").getElementsByTagName("div")[1].outerHTML = "<div class=' bg-black border w-100 h-100 p-0 m-0'><div class='celda d-flex flex-column justify-content-evenly h-100 w-100 '><div id='celda_51'  class='border bg-black  rounded-5 text-center p-1'>51</div></div></div>"
        ////azules-casa-bottom
        document.getElementById("tablero_linea_2_cuadro_3_casillas_2").getElementsByTagName("div")[7].outerHTML = "<div class=' bg-black border w-100 h-100 p-0 m-0'><div class='celda d-flex flex-column justify-content-evenly h-100 w-100 '><div id='celda_17' class='border rounded-5 text-center p-1'>17</div></div></div>"
        ////amarillas-casa-bottom
        document.getElementById("tablero_linea_3_cuadro_2_casillas_2").getElementsByTagName("div")[7].outerHTML = "<div class=' bg-black border w-100 h-100 p-0 m-0'><div id='celda_68' class='celda d-flex  justify-content-evenly h-100 w-100 '><div class='border rounded-5 text-center p-1'>68</div></div></div>"

        ////rojas-casa-bottom
        document.getElementById("tablero_linea_1_cuadro_2_casillas_2").getElementsByTagName("div")[1].outerHTML = "<div class=' bg-black border w-100 h-100 p-0 m-0'><div class='celda d-flex  justify-content-evenly h-100 w-100 '><div  id='celda_34' class='celda border rounded-5 text-center p-1'>34</div></div></div>"

        ////rojas-casa-salida
        document.getElementById("celda_39").outerHTML = "<div class='d-flex justify-content-evenly'><div  id='celda_39' class='celda border rounded-5 text-center p-1'>39</div></div>"
        ////verdes-casa-salida
        document.getElementById("celda_56").outerHTML = "<div class='d-flex flex-column h-100 justify-content-evenly'><div  id='celda_56' class='celda border rounded-5 text-center p-1'>56</div></div>"
        ////amarillas-casa-salida
        document.getElementById("celda_5").outerHTML = "<div class='d-flex  w-100 justify-content-evenly'><div  id='celda_5' class='celda border rounded-5 text-center ps-2 pe-2 p-1'>5</div></div>"
        // makeImage(  "5" ,("celda_5"),"bold 110px Calibri ") 
        ////azules-casa-salida
        document.getElementById("celda_22").outerHTML = "<div class='d-flex  flex-column  h-100 justify-content-evenly'><div  id='celda_22' class='celda border rounded-5 text-center p-1'>22</div></div>"

        //centro-top
        document.getElementById("tablero_linea_2_cuadro_2").innerHTML += "<div id='centro_top' style='' ><canvas class='w-100 h-100' id='myCanvas' ></canvas></div>"

        // jQuery(".celda").click(function (event) {
        //     celda_seleccionada = this.id
        //     id_textarea.value =
        //         "\n" + "Top: " +
        //         this.offsetTop + "\n" +
        //         "Left: " +
        //         this.offsetLeft + "\n" +
        //         "\n --------****--------- \n" +

        //         id_textarea.value

        //     id_textarea.value =
        //         "Celda pulsada: " +
        //         this.innerHTML +
        //         "\n" +
        //         "Celda Id: " +
        //         this.id +
        //         id_textarea.value

        //     id_textarea.value = "Ficha Pulsada_left: " + document.getElementById(ficha_seleccionada).offsetLeft + "\n" + id_textarea.value
        //     id_textarea.value = "Ficha Pulsada_top: " + document.getElementById(ficha_seleccionada).offsetTop + "\n" + id_textarea.value

        //     id_textarea.value = "Ficha Pulsada: " + ficha_seleccionada + "\n" + id_textarea.value




        //     document.getElementById(ficha_seleccionada).offsetTop = document.getElementById(this.id).offsetTop
        //     comprueba_datos()
        // });

        crea_fichas() 
       
        carga_canvas()
         recalcula_fichas() 
        
        jQuery(".celda").click(function (event) {
                celda_seleccionada = this.id
                id_textarea.value =
                    "\n" + "Top: " +
                    this.offsetTop + "\n" +
                    "Left: " +
                    this.offsetLeft + "\n" +
                    "\n             -----------------------------****-------------------------- \n" +

                    id_textarea.value
                    id_textarea.value = "Ficha Pulsada_left: " + document.getElementById(ficha_seleccionada).offsetLeft + "\n" + id_textarea.value
                id_textarea.value = "Ficha Pulsada_top: " + document.getElementById(ficha_seleccionada).offsetTop + "\n" + id_textarea.value

                id_textarea.value = "\n Ficha Pulsada: " + ficha_seleccionada + "\n" + id_textarea.value
                id_textarea.value =
                "\n ************************************************************* \n" +
                "**             Elemento: " + contador_texto +" celda_click \n" +
                "************************************************************* \n" +
                    "Celda pulsada: " +
                    this.innerHTML +
                    "\n" +
                    "Celda Id: " +
                    this.id  +"\n"+
                    id_textarea.value
                    contador_texto+=1

          




                document.getElementById(ficha_seleccionada).offsetTop = document.getElementById(this.id).offsetTop
                comprueba_datos()
            });

        }
        function crea_fichas() {
           // const colores = ["danger", "warning", "success", "primary"]
       //     alert(colores_seleccionados.length)
            colores_seleccionados.forEach(element => {

                for (let i = 1; i < 5; i++) {
                    var final_id = element + "_" + i
                    let ficha =
                        "<canvas " +
                        " posicion='" +
                        element + "_casa_" + i +
                        "' " +
                        " casa='si'"+
                        " id='" +
                        final_id +
                        "' " +
                        " class='" +
                        "ficha ficha-" + element + " rounded-5 bg-gradient bg-" + element +
                        "' " +
                        " style='" +
                        "position:absolute; width:20px;height:20px;" +
                        "' " +
                        ">" +
                        //i+
                        "</canvas>"
                    tablero2.innerHTML += ficha
                }


            });
            // $(".ficha").draggable();

            // $(".ficha").resizable();

            jQuery(".ficha").click(function (event) {
            //    comprueba_ficha(this.id)         

                ficha_seleccionada = this.id

                id_textarea.value =
                "************************************************************* \n" +
                "**             Elemento: " + contador_texto +"  ficha_click_2 \n" +
                "************************************************************* \n" +
                    "posicion: " +
                    //this.getAttribute("posicion") +
                    "celda_" + (parseInt(document.getElementById(this.getAttribute("posicion")).innerHTML) + parseInt(dado_valor3.value)) +
                    "\n" +
                    id_textarea.value
                id_textarea.value =
                "\n ************************************************************* \n" +
                "**             Elemento: " + contador_texto +" ficha_click \n" +
                "************************************************************* \n" +
                    "Ficha pulsada: " +
                    this.innerHTML +
                    "\n" +
                    "<code>Ficha Id: " +
                    this.id +
                    // "\n --------****--------- \n"+
                    "\n" + "</code>Top: " +
                    this.offsetTop + "\n" +
                    "Left: " +
                    this.offsetLeft + "\n" +
                    "\n                  --------****--------- \n"
                    + id_textarea.value
                    contador_texto+=1

  
                    // contador_texto+=1

                // alert("celda_"+ (parseInt(document.getElementById(this.getAttribute("posicion")).innerHTML) +parseInt(dado_valor.value)))
                celda_seleccionada = "celda_" + (parseInt(document.getElementById(this.getAttribute("posicion")).innerHTML) + parseInt(dado_valor3.value))

            //*********    const  parchis_from_storage2=Array.from(JSON.parse(sessionStorage.getItem("Parchis_Partida")).Fichas)
              
            //  alert(parchis_from_storage2[0][3][1])
              //  _objeto_fichas[0][3][1].push("9")
               // parchis_from_storage.Fichas[0][3][1]=parseInt(dado_valor.value)
                //sessionStorage.setItem("Parchis_Partida",JSON.stringify(parchis_from_storage))
              //  alert(JSON.parse(sessionStorage.getItem("Parchis_Partida")).Fichas)
              //  alert(_objeto_fichas)

              //  comprueba_datos()
               // recalcula_fichas()
                //start() 
                //_objeto_fichas=parchis_from_storage2
              //  crear_partida_parchis()

              //  Presenta_fichas('panel_fichas_listado')   
            });

           
//alert("fin")
       
        jQuery(".ficha").click(ficha_click)
 }

        async function ficha_click() {
          //   alert(this.id)
            id_textarea.value=
            "*********************" + "\n" +
                "id: " + 
                this.id + "\n" +
                "casa: " + 
                this.getAttribute("casa")  + "\n" +
                "numero: " + 
                this.id.split("_")[1] + "\n" +  
                "color: " + 
                this.id.split("_")[0] + "\n" +  
                "destino: " + 
                document.getElementById("ficha_div_"+this.id.split("_")[0]).childElementCount + "\n" +             

                
            
            "*********************" + "\n" +

            id_textarea.value
            document.getElementById("ficha_div_"+this.id.split("_")[0]).childNodes[(this.id.split("_")[1]-1)].childNodes[1].innerHTML=
            
                    "<div class='bg-primary m-1 rounded'>"+
                    document.getElementById("config_detail_i2_l_2").getElementsByClassName("contador-panel")[0].innerHTML + "<hr>" +
                    this.outerHTML  +
                    "celda: " + document.getElementById(celda_seleccionada).innerHTML + "<hr>" +
                    "</div>" +
            document.getElementById("ficha_div_"+this.id.split("_")[0]).childNodes[(this.id.split("_")[1]-1)].childNodes[1].innerHTML

                    document.getElementById("ficha_div_"+this.id.split("_")[0]).childNodes[(this.id.split("_")[1]-1)].childNodes[1].getElementsByTagName("canvas")[0].id="" 
                    document.getElementById("ficha_div_"+this.id.split("_")[0]).childNodes[(this.id.split("_")[1]-1)].childNodes[1].getElementsByTagName("canvas")[0].outerHTML="<div style='width:100px ! important;height:100px ! important;overflow:auto;' class='fichina border p-2 w-50'>Ficha : <br>"+document.getElementById("ficha_div_"+this.id.split("_")[0]).childNodes[(this.id.split("_")[1]-1)].childNodes[1].getElementsByTagName("canvas")[0].outerHTML+"<div style='position:relative;top:-35px;left:10px;'>"+  this.id.split("_")[1] + "</div></div>" 
                   // document.getElementById("ficha_div_"+this.id.split("_")[0]).childNodes[(this.id.split("_")[1]-1)].childNodes[1].getElementsByTagName("div")[0].innerHTML="ttt" 


        
                if(this.getAttribute("casa")=="si"){
                    if (valor_dado==5){
                            comprueba_datos()
                    }else{
                            alert("no cinco")
                    }
                }else{

                    for (let i = 1; i < 5; i++) {
                        var contador_casas
                        if(document.getElementById(this.id.split("_")[0]  +"_"+i).getAttribute("casa")=="si"){
                            contador_casas=1
                        }else{
                            contador_casas=0
                        }
                    
             
                    }
                   if(contador_casas==1 & valor_dado==5){alert("saca de casa") }else{                            comprueba_datos()
                   }

                }


                   


        }



        
        async function comprueba_ficha(params) {
           // alert(params)
        //    var sumatorio=""
        //     for (let i = 0; i < 10000; i++) {
        //         sumatorio+= i + "\n" 
                
        //     }
        //     id_textarea.value= "\n" + "Sumatorio: " + sumatorio +"\n" + id_textarea.value

        }


        function comprueba_datos_old() {
            id_textarea.value =
                "Ficha: " + ficha_seleccionada +
                " - Celda: " + celda_seleccionada +
                "\n" +
                "\n" +

                id_textarea.value
            var pan_origen = document.getElementById(ficha_seleccionada)
            var pan_destino = document.getElementById(celda_seleccionada)
            pan_origen.style.top = pan_destino.offsetTop + "px"
            pan_origen.style.left = pan_destino.offsetLeft + "px"
            pan_origen.setAttribute("posicion", celda_seleccionada)

            if ((pan_destino.offsetWidth / pan_destino.offsetHeight) > 1.5) {
                // alert(">1.5 | " + (pan_destino.offsetWidth/pan_destino.offsetHeight*100))
                pan_origen.style.height = pan_destino.offsetHeight + "px"
                pan_origen.style.width = pan_destino.offsetHeight + "px"

            } else {
                if ((pan_destino.offsetWidth / pan_destino.offsetHeight) < 0.7) {
                    // alert("<1 | " +(pan_destino.offsetWidth/pan_destino.offsetHeight*100))
                    pan_origen.style.width = pan_destino.offsetWidth + "px"
                    pan_origen.style.height = pan_destino.offsetWidth + "px"
                    pan_origen.style.border = "outset 8px !important;"
                }
                else {
                    // alert("equal")
                    pan_origen.style.width = pan_destino.offsetWidth - 30 + "px"
                    pan_origen.style.height = pan_destino.offsetWidth - 30 + "px"
                    pan_origen.style.top = pan_destino.offsetTop + 15 + "px"
                    pan_origen.style.left = pan_destino.offsetLeft + 15 + "px"


                    pan_origen.style.border = "outset 2px !important;"
                }

            }

        }
        function comprueba_datos() {
            id_textarea.value =
            "************************************************************* \n" +
                "**             Elemento: " + contador_texto +"  mueve_ficha  \n" +
                "************************************************************* \n" +
                " Ficha: " + ficha_seleccionada +
                "\n Celda: " + celda_seleccionada +
                "\n" +
                "\n" +
                "                    ----------------******-------------------"+

                id_textarea.value
                contador_texto+=1
            var pan_origen = document.getElementById(ficha_seleccionada)
            var pan_destino = document.getElementById(celda_seleccionada)
            pan_origen.style.top = pan_destino.offsetTop + "px"
            pan_origen.style.left = pan_destino.offsetLeft + "px"
            pan_origen.setAttribute("posicion", celda_seleccionada)
            pan_origen.setAttribute("casa", "no")



            if ((pan_destino.offsetWidth > pan_destino.offsetHeight) ) {
                // alert(">1.5 | " + (pan_destino.offsetWidth/pan_destino.offsetHeight*100))
                pan_origen.style.height = pan_destino.offsetHeight + "px"
                pan_origen.style.width = pan_destino.offsetHeight + "px"

            } else {
                if ((pan_destino.offsetWidth < pan_destino.offsetHeight) ) {
                    // alert("<1 | " +(pan_destino.offsetWidth/pan_destino.offsetHeight*100))
                    pan_origen.style.width = pan_destino.offsetWidth + "px"
                    pan_origen.style.height = pan_destino.offsetWidth + "px"
                    pan_origen.style.border = "outset 8px !important;"
                }
                else {
                    // alert("equal")
                    pan_origen.style.width = pan_destino.offsetWidth - 30 + "px"
                    pan_origen.style.height = pan_destino.offsetWidth - 30 + "px"
                    pan_origen.style.top = pan_destino.offsetTop + 15 + "px"
                    pan_origen.style.left = pan_destino.offsetLeft + 15 + "px"


                    pan_origen.style.border = "outset 2px !important;"
                }

            }

        }
 
        function add_player(){
            var nombre_texto = prompt("Please enter your name", "Jugador ");
            var color_texto = colores[ (prompt("Please enter your color", 1)-1)];
            var new_array2=[]
                try{
                //  partida.adjunta()
                new_array2=Array.from(JSON.parse(sessionStorage.getItem("jugadores"))) 
                
                
                //var new_array=[]
                new_array2.push([["nombre",nombre_texto],["color",color_texto]])
                //new_array[0][1][1]="amarillas"
                colores_seleccionados.push(color_texto)
                
                
                }
                
                catch{
                alert("error")
            // parchis_objeto.Partida.adjunta
                new_array2=[]
                new_array2.push([["nombre",nombre_texto],["color",color_texto]])        
                colores_seleccionados.push(color_texto)

                //sessionStorage.setItem("jugadores",JSON.stringify(new_array2))
                }
                
            sessionStorage.setItem("jugadores",JSON.stringify(new_array2))
            //_objeto_jugadores = JSON.parse(JSON.stringify(new_array2))

            rellena_select('jugadores')
            //document.body.getElementsByTagName("select")[0].value=""
        
        }

        function busca_referencia(texto_referencia){

            colores_seleccionados.forEach(element => {
                
                if(element==texto_referencia){
                    alert(colores_seleccionados.indexOf(element))
                    alert(Array.from(JSON.parse(sessionStorage.getItem("jugadores")))[colores_seleccionados.indexOf(element)])
                    alert(colores[colores_seleccionados.indexOf(element)])

                }
                else{

                    alert(colores_seleccionados.indexOf(element))
                    alert(Array.from(JSON.parse(sessionStorage.getItem("jugadores")))[colores_seleccionados.indexOf(element)])
                    alert(colores[colores_seleccionados.indexOf(element)])

                }

            });
            

        }
 
            function update_nombre(numero_pass){
    var new_array2=Array.from(JSON.parse(sessionStorage.getItem("jugadores")))
    //var new_array=[]
    //new_array2.push([["nombre",nombre_texto],["color",color_texto]])
    new_array2[numero_pass][0][1]=input_nombre.value
    
    
    
    sessionStorage.setItem("jugadores",JSON.stringify(new_array2))
    rellena_select(JSON.parse(sessionStorage.getItem("jugadores")))
    //document.getElementsByTagName("main")[0].getElementsByTagName("select")[0].value=""
    
    }
            function update_color(numero_pass){
        var new_array2=Array.from(JSON.parse(sessionStorage.getItem("jugadores")))
        //var new_array=[]
        //new_array2.push([["nombre",nombre_texto],["color",color_texto]])
        new_array2[numero_pass][1][1]=input_color.value
        
        
        
        sessionStorage.setItem("jugadores",JSON.stringify(new_array2))
        rellena_select(JSON.parse(sessionStorage.getItem("jugadores")))
        //document.getElementsByTagName("main")[0].getElementsByTagName("select")[0].value=""
        
        }
            function myFunction() {
            let text;
            if (confirm("Quieres Borrar") == true) {
            text = "You pressed OK!";
                //alert((JSON.parse(sessionStorage.getItem("jugadores")))[input_id.value][0][1])
                const  new_array3=JSON.parse(sessionStorage.getItem("jugadores"))
                new_array3.splice(input_id.value,1)
                sessionStorage.setItem("jugadores",JSON.stringify(new_array3))
              //  rellena_select(JSON.parse(sessionStorage.getItem('jugadores')))
                rellena_select('jugadores')

              //  document.getElementsByTagName("main")[0].getElementsByTagName("select")[0].value=""
                document.getElementsByTagName("select")[0].value=""

            } else {
                text = "You canceled!";


            }
            //document.getElementById("demo").innerHTML = text;
            //alert(text)
}   

        function rellena_select(array_pass2){
           // colores_seleccionados=[];
            try{
                //alert(array_pass2)
                const  array_pass=Array.from(JSON.parse(sessionStorage.getItem(array_pass2)))
                //document.getElementsByTagName("main")[0].getElementsByTagName("select")[0].innerHTML=""
                document.body.getElementsByTagName("select")[0].innerHTML=""
                
                for (let j = 0; j < array_pass.length; j++) {
                 //   const element = array_pass[j];
                //document.getElementsByTagName("main")[0].getElementsByTagName("select")[0].innerHTML+="<option>"+(j+1)+"</option>"
                document.body.getElementsByTagName("select")[0].innerHTML+="<option>"+(j+1)+"</option>"
             //  colores_seleccionados.push(array_pass[j][2][1])
                
                }
                //document.getElementsByTagName("main")[0].getElementsByTagName("select")[0].value=""
                //_objeto_jugadores=JSON.parse(sessionStorage.getItem("jugadores"))//Array.from(sessionStorage.getItem(array_pass2))

            }
            catch{
                alert("no jugador")
               // colores_seleccionados=[]
              //  colores_seleccionados.push(array_pass[j][2][1])

            }
        }
            
            function select_change(position_pass){
            //alert(position_pass)
        
            //alert((JSON.parse(sessionStorage.getItem("jugadores")))[position_pass][0][1])
            input_nombre.value=(JSON.parse(sessionStorage.getItem("jugadores")))[position_pass-1][0][1]
            input_color.value=(JSON.parse(sessionStorage.getItem("jugadores")))[position_pass-1][1][1]
            input_id.value=position_pass-1
            //document.getElementById("input_id").value=position_pass-1
        
        }
        
 
        function recalcula_fichas() {

for (let i = 0; i < document.getElementsByClassName("ficha").length; i++) {
    //const element = array[i];
    const origen_pan = document.getElementsByClassName("ficha")[i]
    id_textarea.value =

        "\n" +
        "Posicion: " +
        origen_pan.getAttribute("posicion") +
        id_textarea.value

    //    var pan_origen=document.getElementById(element.id)
    const pan_destino = document.getElementById(origen_pan.getAttribute("posicion"))
    origen_pan.style.top = pan_destino.offsetTop + "px"
    origen_pan.style.left = pan_destino.offsetLeft + "px"

    if ((pan_destino.offsetWidth / pan_destino.offsetHeight) > 1.5) {
        // origen_pan.style.margin="10px;"
        origen_pan.style.height = (pan_destino.offsetHeight) + "px"
        origen_pan.style.width = (pan_destino.offsetHeight) + "px"

    } else {
        if ((pan_destino.offsetWidth / pan_destino.offsetHeight) < 0.7) {
            origen_pan.style.width = (pan_destino.offsetWidth) + "px"
            origen_pan.style.height = (pan_destino.offsetWidth) + "px"

        } else {
            origen_pan.style.width = pan_destino.offsetWidth - 30 + "px"
            origen_pan.style.height = pan_destino.offsetWidth - 30 + "px"
            origen_pan.style.top = pan_destino.offsetTop + 15 + "px"
            origen_pan.style.left = pan_destino.offsetLeft + 15 + "px"
            origen_pan.style.border = "outset 6px !important;"


            //   origen_pan.style.setAttribute("border","outset 18px !important;")
        }
    }
   
}

id_textarea.value =    "************************************************************* \n" +
                "**             Elemento: " + contador_texto +"  recalc_ficha  \n" +
                "************************************************************* \n" + id_textarea.value 
                contador_texto+=1
// Array.from(document.getElementsByClassName("ficha")).forEach(element => {
//     id_textarea.value=
//     "\n"+
//     "Posicion: "+
//     element.getAttribute("posicion")+
//     id_textarea.value

//     var pan_origen=document.getElementById(element.id)
//     var pan_destino=document.getElementById(element.getAttribute("posicion"))
//         pan_origen.style.top=pan_destino.offsetTop +"px"
//         pan_origen.style.left=pan_destino.offsetLeft +"px"


// });
id_textarea.value =
"\n ************************************************************* \n" +
                "**             Elemento: " + contador_texto +" Recalcula \n" +
                "************************************************************* \n" +
"\n RECALCULA \n"+ id_textarea.value 
contador_texto+=1
}
var valor_dado 
        function tira_dadoold() {
             valor_dado = Math.floor(Math.random() * 6) + 1;
            valor_dado = Math.floor(Math.random() * 6) + 1;
            valor_dado = Math.floor(Math.random() * 6) + 1;
            // var dado_field = document.getElementById("dado_valor2");
            // dado_field.value = valor_dado;
          //  document.getElementById("dado_valor2").value = valor_dado;
            document.getElementById("dado_valor3").value = valor_dado;

            // var eventify = function (arr, callback) {
            //     arr.push = function (e) {
            //         Array.prototype.push.call(arr, e);
            //         callback(arr);
            //     };
            // };
            // var testArr = [1, 2];


            // eventify(testArr, function (updatedArr) {
            //     alert(updatedArr.length);
            //     id_textarea.value = updatedArr.length + "\n" + id_textarea.value;

            // });
            // testArr.push(3);

            // testArr.push(4);
            // testArr.push(5);
            // testArr.push(6);
            // sessionStorage.setItem("Test-arr", JSON.stringify(testArr))

        }
        var contador_dado_tirada=1
        jQuery("#boton_dado").click(function () {
        //var start_1= new Event(event)
            config_detail_i2_l_2.getElementsByTagName("div")[2].innerHTML=
            "<div class='contador-panel d-flex flex-column border bg-black w-auto  mt-1 m-1 p-1'>"+
                // "Contador:"+
                    // "<p class='w-auto rounded-2 border m-1 p-0 ps-2'> Contador: " +

                        "<div class='d-flex ps-3 mt-1'>Contador:<div class='border rounded-5 p-0 ps-2 pe-2 ms-2 me-2 bg-white bg-gradient text-black'>"+
                            contador_dado_tirada +
                            "</div></div>" +
                    // "</p>" +
                    "<div class='border-0 m-2 mt-0 p-2 d-flex flex-wrap'>" +
                        "<div class='d-flex border m-1 ps-2 p-1'>"+
                            "Valor :  "+
                                "<div class='border rounded-5 p-0 ps-2 pe-2 ms-2 me-2 bg-white bg-gradient text-black'>"+
                                    dado_valor3.value + 
                                "</div>" +
                        "</div>" +
                        "<div class='d-flex border ps-2 m-1 p-1'>"+
                            "Color:  "+   
                            "<div class=' rounded-2 ms-3 ps-2 pe-5 bg-"+
                            dado_valor3.className.split(" ")[dado_valor3.className.split(" ").length-1].split("-")[1] +
                            "'>"+
             

                            "</div>"+
                        "</div>" +
                        "<div>"+
                        
                        "</div>" +

                    "</div>" +
            "</div>"+
            config_detail_i2_l_2.getElementsByTagName("div")[2].innerHTML
            contador_dado_tirada+=1;
        });

        jQuery("#boton_dado").click(dado_click)

        var cuenta_seis=0
        async function dado_click() {
            let cuenta_1=colores_seleccionados.length; 
            if(this.name==cuenta_1){
                this.name=0
            };
            tira_dadoold();

            

            switch(valor_dado) {
                case 6:
             //   alert(6)
                try {
                    if(cuenta_seis==2){dado_valor3.className=' rounded-5   w-100 text-center bg-gradient bg-'+colores_seleccionados[this.name];cuenta_seis=0}else{dado_valor3.className=' rounded-5   w-100 text-center bg-gradient bg-'+colores_seleccionados[this.name];cuenta_seis+=1}
                    
                } catch (error) {
                    
                }

                   // alert(6)
                    


               // this.name=parseInt(this.name) -1
                 break;
                case 5:
              //  alert(5)
                id_textarea.value= "1- " + colores_seleccionados[this.name] + "\n" + id_textarea.value

                for (let i = 1; i < 5; i++) {
                    id_textarea.value=
                    document.getElementById(colores_seleccionados[this.name] +"_"+i).getAttribute("casa") +
                    "\n"+
                    id_textarea.value
                }


                this.name=parseInt(this.name) +1;
                dado_valor3.className=' rounded-5   w-100 text-center bg-gradient bg-'+colores_seleccionados[this.name-1];
                 //  id_textarea.value= "2- " + colores_seleccionados[this.name] + "\n" + id_textarea.value




                    break;

                default:
                  //  alert("else")
                this.name=parseInt(this.name) +1;
                dado_valor3.className=' rounded-5   w-100 text-center bg-gradient bg-'+colores_seleccionados[this.name-1];

                    // code block
            }

           
          
        }
        function makeImage(text2, id_pass2, font_pass2) {
            // e.preventDefault();
            updateCanvas(text2, id_pass2, font_pass2);
            // this.reset();
        }

        function rellena_fichas(){
        var conta_1=1
            Array.from(JSON.parse(sessionStorage.getItem("jugadores"))).forEach(element => {
                let pepin=Array.from(JSON.parse(sessionStorage.getItem("jugadores"))).indexOf(element)
              //   alert(pepin)
                colores_seleccionados.push(element[1][1])
             //   config_central_i_l_2.getElementsByTagName("div")[0].innerHTML+=element + "\n"
                fichas_detail.innerHTML+=
                "<div id='config_central_i_l_2_" +
                 element[1][1] +
                 "' class='d-flex flex-column  w-25 flex-grow-1  border rounded-3 m-0 border-2 p-1   overflow-auto m-0 bg-" +
                 element[1][1] +
                 "'>"+
                 
                        "<h6 name='ficha_div_"+element[1][1]+"' onclick='show_hide(this.getAttribute(&#39;name&#39;));'>" +
                            conta_1 +
                            " - " +
                        element[0][1] +
                        "</h6>"+
                        valor_pasado(element[1][1]) +
                
                "</div>"
                conta_1+=1
            });
           // busca_referencia(colores_seleccionados[0])
        }

        function valor_pasado(valor_text){
            var texto_suma=""

            for (let i = 1; i < 5; i++) {
            
                texto_suma+=
                

                    "<div class='d-flex h-100 flex-column border border-white rounded p-1'>" +

                        // valor_text + "_" + i + "\n" +
                         "<div class='w-auto h-auto rounded-3 d-flex'>"+
                            "<div onclick='if(this.parentElement.parentElement.childNodes[1].style.display==&#39;none&#39;){this.parentElement.parentElement.childNodes[1].style.display=&#39;&#39;}else{this.parentElement.parentElement.childNodes[1].style.display=&#39;none ! important&#39;};' class='fichin border rounded-5  bg-"+
                            valor_text +
                            "'>"+ i + "</div>"+
                        "</div>" +
                         "<div class='ficha-panel bg-white d-flex flex-column text-black m-1 rounded h-100 flex-grow-1 overflow-auto gap-2'>*</div>"+

                    "</div>"
                
            }
            texto_suma=
            
            "<div id='ficha_div_"+valor_text+"' class='d-flex flex-column border rounded-2 border-white bg-black bg-gradient p-2 gap-2 h-100 overflow-auto me-1'>" +
            
            texto_suma +

            "</div>"


            return texto_suma
        }
        function updateCanvas(text, id_pass, font_pass) {
            const c = document.getElementById(id_pass);
            const ctx = c.getContext("2d");

            //const c = document.getElementById("myCanvas");
            //const ctx = c.getContext("2d");

            //  ctx.clearRect(0, 0, 50, 50);
            //ctx.fillStyle = "#212121";
            //   ctx.fillRect(0, 0, 50, 50);

            // Customize font size, color, etc., as needed
            ctx.font = font_pass// "bold 110px Calibri ";
            //ctx.color="yellow"
            // ctx.fillStyle = "#39FF14";
            ctx.fillStyle = "yellow";

            ctx.fillText(text, 120, 110);

        }
        function carga_canvas() {
            var r;
            const colores = ["danger", "warning", "success", "primary"]

            colores_seleccionados.forEach(element => {

                for (r = 1; r < 5; r++) {

                    makeImage(r, (element + "_" + r), "bold 110px Calibri ")

                }

            })
            var canvasElement = document.querySelector("#myCanvas");
            var context = canvasElement.getContext("2d");

            // the triangle

            var el_h = screen.height; //canvasElement.offsetHeight
            var el_w = screen.width; //canvasElement.offsetWidth
            //alert(el_h + " _" + el_w )

            context.beginPath();
            //context.moveTo((el_w/2), (el_h/2));
            context.moveTo((0), (150));

            //context.lineTo(el_w/2, (el_h/2)+50);
            //context.lineTo((el_w/2)+100, (el_h/2)+50);
            context.lineTo(150, (75));

            context.lineTo(300, 150);
            context.closePath();

            // the outline
            context.lineWidth = 1;
            context.strokeStyle = '#666666';
            context.stroke();

            // the fill color
            context.fillStyle = "#FFCC00";
            context.fill();


            context.beginPath();
            //context.moveTo((el_w/2), (el_h/2));
            context.moveTo((0), (150));

            //context.lineTo(el_w/2, (el_h/2)+50);
            //context.lineTo((el_w/2)+100, (el_h/2)+50);
            context.lineTo(150, (75));

            context.lineTo(0, 0);
            context.closePath();

            // the outline
            context.lineWidth = 1;
            context.strokeStyle = '#666666';
            context.stroke();

            // the fill color
            context.fillStyle = "#198754";
            context.fill();




            context.beginPath();
            //context.moveTo((el_w/2), (el_h/2));
            context.moveTo((0), (0));

            //context.lineTo(el_w/2, (el_h/2)+50);
            //context.lineTo((el_w/2)+100, (el_h/2)+50);
            context.lineTo(150, (75));

            context.lineTo(300, 0);
            context.closePath();

            // the outline
            context.lineWidth = 1;
            context.strokeStyle = '#666666';
            context.stroke();

            // the fill color
            context.fillStyle = "#dc3545";
            context.fill();


            context.beginPath();
            //context.moveTo((el_w/2), (el_h/2));
            context.moveTo((300), (0));

            //context.lineTo(el_w/2, (el_h/2)+50);
            //context.lineTo((el_w/2)+100, (el_h/2)+50);
            context.lineTo(150, (75));

            context.lineTo(300, 150);
            context.closePath();

            // the outline
            context.lineWidth = 1;
            context.strokeStyle = '#666666';
            context.stroke();

            // the fill color
            context.fillStyle = "#0d6efd";
            context.fill()


            // canvasElement = document.querySelector("#canvas_1");
            // context = canvasElement.getContext("2d");
            // context.beginPath();
            // //context.moveTo((el_w/2), (el_h/2));
            // context.moveTo((0), (0));
            // context.lineTo(50,45);
            // context.closePath();
            // // the outline
            // context.lineWidth = 5;
            // context.strokeStyle = 'white';
            // context.stroke();

            // canvasElement = document.querySelector("#canvas_2");
            // context = canvasElement.getContext("2d");
            // context.beginPath();
            // //context.moveTo((el_w/2), (el_h/2));
            // context.moveTo((0), (50));
            // context.lineTo(65,0);
            // context.closePath();
            // // the outline
            // context.lineWidth = 5;
            // context.strokeStyle = 'white';
            // context.stroke();
            // canvasElement = document.querySelector("#canvas_4");
            // context = canvasElement.getContext("2d");
            // context.beginPath();
            // //context.moveTo((el_w/2), (el_h/2));
            // context.moveTo((0), (50));
            // context.lineTo(55,0);
            // context.closePath();
            // // the outline
            // context.lineWidth = 5;
            // context.strokeStyle = 'white';
            // context.stroke();
            // canvasElement = document.querySelector("#canvas_3");
            // context = canvasElement.getContext("2d");
            // context.beginPath();
            // //context.moveTo((el_w/2), (el_h/2));
            // context.moveTo((50), (50));
            // context.lineTo(0,5);
            // context.closePath();
            // // the outline
            // context.lineWidth = 5;
            // context.strokeStyle = 'white';
            // context.stroke();
        }
  
                
        function crea_elemento(destino_id, tag_local, id_local, class_local, innerHTML_local) {
            contador_tags = document.body.getElementsByTagName("*").length
            texto_final = ""
            panel_destino = document.getElementById(destino_id)

            texto_final += "<"
            texto_final += tag_local
            texto_final += " id='"
            texto_final += id_local
            texto_final += "'"
            texto_final += " class='"
            texto_final += class_local
            texto_final += "'"
            texto_final += "> "
            texto_final += innerHTML_local
            texto_final += "</"
            texto_final += tag_local
            texto_final += ">"


            // texto_final=
            // "< " + 
            // tag_local +
            // " id='" +
            // id_local + "'" +
            // " class='" +
            // class_local + "'" +           

            // " >" +

            // innerHTML_local +

            // "</" +

            // tag_local + ">"


        }
       
        function processQ() {
            // ... this will be called on each .push
            alert("this" + this)
           // alert("val1"+val_1)
           // alert("val2"+val_2)


        }

var myEventsQ = [];
//myEventsQ.push = function() { Array.prototype.push.apply(this, arguments);  processQ();};
//myEventsQ.push("uno")

        $("#panel_general").resizable();
        $("#panel_general").draggable();

        document.getElementById("panel_central_i_2").innerHTML=document.getElementsByTagName("template")[0].innerHTML
    
    /* @arr array you want to listen to
   @callback function that will be called on any change inside array
 */
function listenChangesinArray(arr,callback){
     // Add more methods here if you want to listen to them
    ['pop','push','reverse','shift','unshift','splice','sort'].forEach((m)=>{
        arr[m] = function(){

        //    var arguments=("1","2")
                     var res = Array.prototype[m].apply(arr, arguments);  // call normal behaviour
                     callback.apply(arr, arguments);  // finally call the callback supplied
                     return res;
                 }
    });
}
    
listenChangesinArray(myEventsQ,processQ)

window.addEventListener('storage', function(event){ alert(event.target.localStorage.getItem(prompt("test","test")))})


window.addEventListener( typeof(this),run_03)

function run_03(){
    alert("run_03")
}
//window.localStorage.setItem('test', '123')
//window.dispatchEvent( new Event('storage') ) // <----- 
   
//boton_auto.click()
   </script>
                     <!-- <script src="./newscripts.js" defer></script> -->

</body>
</html>